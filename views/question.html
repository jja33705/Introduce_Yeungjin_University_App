{% extends 'layout.html' %}

{% block content %}
    <div class="question">
        {% if question.User.id == user.id %}
        <div class="clearfix">
            <a href="/qna" class="btn btn-default btn-sm pull-right" onclick="removeQuestion(`{{question.id}}`);">삭제</a>
            <a href="/qna/ask/{{question.id}}" class="btn btn-default btn-sm pull-right" onclick="editQuestion(`{{question.id}}`)">수정</a>
        </div>
        {% endif %}
        <h2 class="text-center">{{question.title}}</h2>
        <div class="text-right">{{question.User.nick}}</div>
        <div class="text-right">{{question.createdAt}}</div>
        <div class="question-content" id="question-content">{{question.content}}</div>
    </div>
    {% if user %}
    <form id="answer-form" action="/qna/{{question.id}}/answer" method="post">
        <div class="row">
            <div class="col-lg-12">
              <div class="input-group">
                <input type="text" rows="3" name= "content" class="form-control" >
                <span class="input-group-btn">
                  <button class="btn btn-default" id="answer-button" type="submit">답변하기</button>
                </span>
              </div><!-- /input-group -->
            </div><!-- /.col-lg-6 -->
          </div><!-- /.row -->
    </form>
    {% endif %}
    {% for answer in answers %}
        <div class="answer">
            {% if answer.User.id == user.id %}
            <div class="clearfix">
                <span class="pull-right"><a href="/qna/{{question.id}}" onclick="editAnswer(`{{answer.id}}`)">수정</a></span>
                <span class="pull-right">&nbsp;&nbsp;</span>
                <span class="pull-right"><a href="/qna/{{question.id}}" onclick="removeAnswer(`{{answer.id}}`);">삭제</a></span>
            </div>
            {% endif %}
            <div class="answer-header">
                <span class="answer-auther">{{answer.User.nick}}</span>
                <span class="answer-date">{{answer.createdAt}}</span>
            </div>
            <div class="answer-content">{{answer.content}}</div>
        </div>
    {% endfor %}
{% endblock %}

{% block script %}
    <script>
        function removeQuestion(questionId) {
            if (confirm('질문을 삭제하시겠습니까?')) {
                axios.delete(`/qna/question/${questionId}`);
           }
        }; 

        function removeAnswer(answerId) {
            if (confirm('답변을 삭제하시겠습기까?')) {
                axios.delete(`/qna/answer/${answerId}`);
            }
        };

        function editAnswer(answerId) {
            
        }
    </script>
{% endblock %}
















// 장재현은 바보구여 오늘 장재현때문에 무슨 일 있었는지 아시나요? 하...정말 오늘 정말 너무 말도 안되는 일이 있었지 뭐에요...정말 장재현 너무 사랑해! 너무 귀엽네여~ㅎㅎㅎㅎ